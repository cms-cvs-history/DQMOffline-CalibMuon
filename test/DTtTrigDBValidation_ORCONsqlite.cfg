process CALIB = {
   
    include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
    include "Geometry/DTGeometry/data/dtGeometry.cfi"
    include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"


    source = EmptyIOVSource {
	string timetype = "runnumber"
        untracked uint32 firstRun = 1
	untracked uint32 lastRun = 100
        uint32 interval = 90
    }

    untracked PSet maxEvents = {untracked int32 input = 1}
    
   
    include "DQMServices/Core/data/DQM.cfg"
    replace DQM.collectorHost = ""


  
    es_source ttrigRef = PoolDBESSource {
	string timetype = "runnumber"    
	string connect = "oracle://cms_orcoff_prod/CMS_COND_20X_DT"

	untracked bool siteLocalConfig = false
	PSet DBParameters = {
	    untracked int32 messageLevel = 0
	    untracked string authenticationPath = "/afs/cern.ch/cms/DB/conddb"
	}
	
	VPSet toGet = {
	    { 
              string record = "DTTtrigRcd"
	      string tag = "tTrig_CRUZET_080708_2019" 
              untracked string label = "ttrigRef" 
            },
            {
                untracked string connect =  "sqlite_file:ttrig_second_52256.db"
                string record = "DTTtrigRcd" 
                string tag = "ttrig"
                untracked string label = "ttrigToValidate"
            }
    	}
    }


    service = MessageLogger {
        untracked vstring destinations = { "cout" }
        untracked vstring debugModules = { "dtTTrigAnalyzer" }
        untracked vstring categories = { "tTrigdbValidation" }
        untracked PSet cout = {
            untracked string threshold = "DEBUG"
            untracked PSet default = { untracked int32 limit = 0 }
            untracked PSet FwkJob  = { untracked int32 limit = 0 }
            untracked bool noLineBreaks = true
            untracked PSet DEBUG = {untracked int32 limit = 0 }
            untracked PSet t0dbValidation = {untracked int32 limit = 10000000}
        }
    }



  
    #Module to produce t0 histograms and save them into a root file
    module dtTTrigAnalyzer = DTtTrigDBValidation {
	untracked string labelDBRef = "ttrigRef"
        untracked string labelDB = "ttrigToValidate"
	untracked string t0TestName = "tTrigDifferenceInRange"
        untracked string OutputFileName="tTrigTestMonitoring.root"
    }	



    module qTester = QualityTester{
     untracked int32 prescaleFactor = 1
     untracked FileInPath qtList = "DQMOffline/CalibMuon/data/QualityTests_ttrig.xml" 
   } 



     path p = { dtTTrigAnalyzer, qTester }

}
